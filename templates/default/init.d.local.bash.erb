#!/bin/bash
#
# This file was generated by chef for <%= node['fqdn'] %>
# DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN BY CHEF CLIENT
#
### BEGIN INIT INFO
# Provides: <%= @service_name %>
# Required-Start: $network $remote_fs $syslog $local_fs
# Required-Stop: $network $remote_fs $syslog $local_fs
# Default-Start: 2 3 4 5
# Default-Stop: 0 1 6
# Short-Description: starts <%= @service_name %> by eye
### END INIT INFO

EYE_BIN="/usr/bin/env <%= @eye_bin %>"
RUN_USER=<%= @user || 'root' %>
LOG_FILE=<%= @log_file || '/var/log/eye.log' %>
APPLICATION=<%=@name %>
#https://github.com/kostya/eye/wiki/What-is-loader_eye-and-leye

source /etc/eye/functions

reload() {
  load_file <%= @eye_file %>
}

case "$1" in
  start)
    start
    reload
    ;;
  stop)
    stop true
    ;;
  restart)
    stop
    start
    reload
    ;;
  reload)
    reload
    ;;
  status)
    status
    ;;
  full-status)
    status '' true
    ;;
  watch)
    execute watch all
    ;;
  explain)
    check_file <%= @eye_file %> true true
    ;;
  break)
    execute break all
    ;;
  check)
    check_file <%= @eye_file %> false true
    ;;
  *)
    echo "Usage: $0 {start|stop|restart|status|full-status|check|explain|watch|break}"
    exit 1
    ;;
esac

